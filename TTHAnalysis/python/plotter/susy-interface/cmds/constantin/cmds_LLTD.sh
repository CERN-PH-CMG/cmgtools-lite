#!/bin/bash
# syntax: python susy-scanmaker/run.py config model outdir [options]

python susy-scanmaker/run.py 3l TChiNeuSlepSneu_TD /mnt/t3nfs01/data01/shome/cheidegg/o/2016-08-01_ewk80X_scan12p9final_full  --s2v --tree treeProducerSusyMultilepton -P /mnt/t3nfs01/data01/shome/cheidegg/o/2016-07-13_ewkskims80X -F sf/t {P}/leptonJetReCleanerSusyEWK3L/evVarFriend_{cname}.root -F sf/t {P}/leptonBuilderEWK/evVarFriend_{cname}.root -F sf/t {P}/eventBTagWeight/evVarFriend_{cname}.root --mcc susy-ewkino/3l/mcc_ewkino.txt -f -j 4 -L susy-ewkino/3l/functionsEWK.cc --plotgroup fakes_appldata+=promptsub --plotgroup fakes_appldata_ewk_Up+=promptsub_ewk_Up --plotgroup fakes_appldata_ewk_Dn+=promptsub_ewk_Dn --ignore promptsub --ignore promptsub_ewk_Up --ignore promptsub_ewk_Dn --neglist promptsub --neglist promptsub_ewk_Up --neglist promptsub_ewk_Dn -X blinding -W 'puw2016_nInt_12p9fb(nTrueInt)*triggerSF(BR, LepSel_pt[0], LepSel_pdgId[0], LepSel_pt[1], LepSel_pdgId[1], LepSel_pt[2], LepSel_pdgId[2])*eventBTagSF*leptonSF(getLeptonSF(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSF(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSF(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' --WFS 'leptonSFFS(getLeptonSFFS(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSFFS(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSFFS(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' -l 12.9 --out 3lB --expr "SR-36" --bins "6,0.5,6.5" --noNegVar --hardZero -q all.q --sigOnly
python susy-scanmaker/run.py 3l TChiNeuSlepSneu_TD /mnt/t3nfs01/data01/shome/cheidegg/o/2016-08-01_ewk80X_scan12p9final_full  --s2v --tree treeProducerSusyMultilepton -P /mnt/t3nfs01/data01/shome/cheidegg/o/2016-07-13_ewkskims80X -F sf/t {P}/leptonJetReCleanerSusyEWK3L/evVarFriend_{cname}.root -F sf/t {P}/leptonBuilderEWK/evVarFriend_{cname}.root -F sf/t {P}/eventBTagWeight/evVarFriend_{cname}.root --mcc susy-ewkino/3l/mcc_ewkino.txt -f -j 4 -L susy-ewkino/3l/functionsEWK.cc --plotgroup fakes_appldata+=promptsub --plotgroup fakes_appldata_ewk_Up+=promptsub_ewk_Up --plotgroup fakes_appldata_ewk_Dn+=promptsub_ewk_Dn --ignore promptsub --ignore promptsub_ewk_Up --ignore promptsub_ewk_Dn --neglist promptsub --neglist promptsub_ewk_Up --neglist promptsub_ewk_Dn -X blinding -W 'puw2016_nInt_12p9fb(nTrueInt)*triggerSF(BR, LepSel_pt[0], LepSel_pdgId[0], LepSel_pt[1], LepSel_pdgId[1], LepSel_pt[2], LepSel_pdgId[2])*eventBTagSF*leptonSF(getLeptonSF(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSF(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSF(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' --WFS 'leptonSFFS(getLeptonSFFS(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSFFS(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSFFS(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' -R trigger trigger2T '!isData || Triggers_2l || Triggers_2t' -l 12.9 --out 3lD --expr "SR-56" --bins "14,0.5,14.5" --noNegVar --hardZero -q all.q --sigOnly
python susy-scanmaker/run.py 3l TChiNeuSlepSneu_TD /mnt/t3nfs01/data01/shome/cheidegg/o/2016-08-01_ewk80X_scan12p9final_full  --s2v --tree treeProducerSusyMultilepton -P /mnt/t3nfs01/data01/shome/cheidegg/o/2016-07-13_ewkskims80X -F sf/t {P}/leptonJetReCleanerSusyEWK3L/evVarFriend_{cname}.root -F sf/t {P}/leptonBuilderEWK/evVarFriend_{cname}.root -F sf/t {P}/eventBTagWeight/evVarFriend_{cname}.root --mcc susy-ewkino/3l/mcc_ewkino.txt -f -j 4 -L susy-ewkino/3l/functionsEWK.cc --plotgroup fakes_appldata+=promptsub --plotgroup fakes_appldata_ewk_Up+=promptsub_ewk_Up --plotgroup fakes_appldata_ewk_Dn+=promptsub_ewk_Dn --ignore promptsub --ignore promptsub_ewk_Up --ignore promptsub_ewk_Dn --neglist promptsub --neglist promptsub_ewk_Up --neglist promptsub_ewk_Dn -X blinding -W 'puw2016_nInt_12p9fb(nTrueInt)*triggerSF(BR, LepSel_pt[0], LepSel_pdgId[0], LepSel_pt[1], LepSel_pdgId[1], LepSel_pt[2], LepSel_pdgId[2])*eventBTagSF*leptonSF(getLeptonSF(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSF(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSF(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' --WFS 'leptonSFFS(getLeptonSFFS(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSFFS(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSFFS(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' -R trigger trigger2T '!isData || Triggers_2l || Triggers_2t' -l 12.9 --out 3lE --expr "SR-70" --bins "10,0.5,10.5" --noNegVar --hardZero -q all.q --sigOnly
python susy-scanmaker/run.py 3l TChiNeuSlepSneu_TD /mnt/t3nfs01/data01/shome/cheidegg/o/2016-08-01_ewk80X_scan12p9final_full  --s2v --tree treeProducerSusyMultilepton -P /mnt/t3nfs01/data01/shome/cheidegg/o/2016-07-13_ewkskims80X -F sf/t {P}/leptonJetReCleanerSusyEWK3L/evVarFriend_{cname}.root -F sf/t {P}/leptonBuilderEWK/evVarFriend_{cname}.root -F sf/t {P}/eventBTagWeight/evVarFriend_{cname}.root --mcc susy-ewkino/3l/mcc_ewkino.txt -f -j 4 -L susy-ewkino/3l/functionsEWK.cc --plotgroup fakes_appldata+=promptsub --plotgroup fakes_appldata_ewk_Up+=promptsub_ewk_Up --plotgroup fakes_appldata_ewk_Dn+=promptsub_ewk_Dn --ignore promptsub --ignore promptsub_ewk_Up --ignore promptsub_ewk_Dn --neglist promptsub --neglist promptsub_ewk_Up --neglist promptsub_ewk_Dn -X blinding -W 'puw2016_nInt_12p9fb(nTrueInt)*triggerSF(BR, LepSel_pt[0], LepSel_pdgId[0], LepSel_pt[1], LepSel_pdgId[1], LepSel_pt[2], LepSel_pdgId[2])*eventBTagSF*leptonSF(getLeptonSF(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSF(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSF(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' --WFS 'leptonSFFS(getLeptonSFFS(LepSel_pt[0], LepSel_eta[0], LepSel_pdgId[0]), getLeptonSFFS(LepSel_pt[1], LepSel_eta[1], LepSel_pdgId[1]), getLeptonSFFS(LepSel_pt[2], LepSel_eta[2], LepSel_pdgId[2]))' -R trigger trigger2T '!isData || Triggers_2l || Triggers_2t' -A sanity tigherpteta 'abs(LepSel1_eta)<2.1 && abs(LepSel2_eta)<2.1 && abs(LepSel3_eta)<2.1' -A sanity tighterpt '(abs(LepSel1_pdgId)==11 && LepSel1_pt>30) || (abs(LepSel1_pdgId)==13 && LepSel1_pt>25) || (abs(LepSel2_pdgId)==11 && LepSel2_pt>30) || (abs(LepSel2_pdgId)==13 && LepSel2_pt>25) || (abs(LepSel3_pdgId)==11 && LepSel3_pt>30) || (abs(LepSel3_pdgId)==13 && LepSel3_pt>25)' -l 12.9 --out 3lF --expr "SR-80" --bins "8,0.5,8.5" --noNegVar --hardZero -q all.q --sigOnly
